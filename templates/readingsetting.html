{% extends "base.html" %}

{% block head_contents %}
    <style>
      .btn-primary[disabled] { background-color: #AAAACC; }
    </style>
{% endblock %}

{% block body_contents %}

  <div class="row pt-3">
    <div class="col-2 p-3 d-flex align-items-end justify-content-end">
    </div>
    <div class="col m-0 p-0 g-0">
      <div class="row justify-content-center">
        <canvas id="preview" class="m-0 p-0 g-0" width="{{ preview_w }}" height="{{ preview_h }}" style="background-color: #EEEEEE;"> </canvas>
      </div>
    </div>
    <div class="col-2 p-3 d-flex align-items-end">
    </div>
  </div>
  <div class="row p-3">
    <form class="col-lg p-0 mt-0 mb-3">

      <div class="row row-cols-auto p-1 m-1 border">
        <div class="col">
          <div class="form-check form-check-inline">
            <input id="not_read" class="form-check-input" type="checkbox">
            <label for="not_read" class="form-check-label col-form-label">読み取り無効</label>
          </div>
        </div>
      </div>

      <div class="row row-cols-auto p-1 m-1 border">
        <div class="col-3 ">
          <div class="form-check form-check-inline">
            <input id="labeled" class="form-check-input" type="checkbox">
            <label for="labeled" class="form-check-label col-form-label">ラベルデータ設定</label>
          </div>
        </div>
        <label for="labeled_temp" class="col-1 col-form-label text-right">温度</label>
        <input id="labeled_temp" class="col-2 form-control dmrect" type="number">
        <label for="labeled_humd" class="col-1 col-form-label text-right">湿度</label>
        <input id="labeled_humd" class="col-2 form-control dmrect" type="number">
      </div>

      <div class="form-group row row-cols-auto p-1 m-1 border">
        <legend class="col col-form-label bg-light">rect0</legend>
        <label for="r0_x" class="col-1 col-form-label text-right">x</label>
        <input id="r0_x" class="col form-control dmrect" type="number">
        <label for="r0_y" class="col-1 col-form-label text-right">y</label>
        <input id="r0_y" class="col form-control dmrect" type="number">
        <label for="r0_w" class="col-1 col-form-label text-right">w</label>
        <input id="r0_w" class="col form-control dmrect" type="number">
        <label for="r0_h" class="col-1 col-form-label text-right">h</label>
        <input id="r0_h" class="col form-control dmrect" type="number">
        <label for="r0_th" class="col-1 col-form-label text-right">th</label>
        <input id="r0_th" class="col form-control" type="number">
      </div>
      <div class="form-group row p-1 m-1 border">
        <legend class="col col-form-label bg-light">rect1</legend>
        <label for="r1_x" class="col-1 col-form-label text-right">x</label>
        <input id="r1_x" class="col form-control dmrect" type="number">
        <label for="r1_y" class="col-1 col-form-label text-right">y</label>
        <input id="r1_y" class="col form-control dmrect" type="number">
        <label for="r1_w" class="col-1 col-form-label text-right">w</label>
        <input id="r1_w" class="col form-control dmrect" type="number">
        <label for="r1_h" class="col-1 col-form-label text-right">h</label>
        <input id="r1_h" class="col form-control dmrect" type="number">
        <label for="r1_th" class="col-1 col-form-label text-right">th</label>
        <input id="r1_th" class="col form-control" type="number">
      </div>
      <div class="form-group row p-1 m-1 border">
        <legend class="col col-form-label bg-light">rect2</legend>
        <label for="r2_x" class="col-1 col-form-label text-right">x</label>
        <input id="r2_x" class="col form-control dmrect" type="number">
        <label for="r2_y" class="col-1 col-form-label text-right">y</label>
        <input id="r2_y" class="col form-control dmrect" type="number">
        <label for="r2_w" class="col-1 col-form-label text-right">w</label>
        <input id="r2_w" class="col form-control dmrect" type="number">
        <label for="r2_h" class="col-1 col-form-label text-right">h</label>
        <input id="r2_h" class="col form-control dmrect" type="number">
        <label for="r2_th" class="col-1 col-form-label text-right">th</label>
        <input id="r2_th" class="col form-control" type="number">
      </div>
      <div class="form-group row p-1 m-1 border">
        <legend class="col col-form-label bg-light">rect3</legend>
        <label for="r3_x" class="col-1 col-form-label text-right">x</label>
        <input id="r3_x" class="col form-control dmrect" type="number">
        <label for="r3_y" class="col-1 col-form-label text-right">y</label>
        <input id="r3_y" class="col form-control dmrect" type="number">
        <label for="r3_w" class="col-1 col-form-label text-right">w</label>
        <input id="r3_w" class="col form-control dmrect" type="number">
        <label for="r3_h" class="col-1 col-form-label text-right">h</label>
        <input id="r3_h" class="col form-control dmrect" type="number">
        <label for="r3_th" class="col-1 col-form-label text-right">th</label>
        <input id="r3_th" class="col form-control" type="number">
      </div>
      <div class="form-group row p-1 m-1 border">
        <legend class="col col-form-label bg-light">rect4</legend>
        <label for="r4_x" class="col-1 col-form-label text-right">x</label>
        <input id="r4_x" class="col form-control dmrect" type="number">
        <label for="r4_y" class="col-1 col-form-label text-right">y</label>
        <input id="r4_y" class="col form-control dmrect" type="number">
        <label for="r4_w" class="col-1 col-form-label text-right">w</label>
        <input id="r4_w" class="col form-control dmrect" type="number">
        <label for="r4_h" class="col-1 col-form-label text-right">h</label>
        <input id="r4_h" class="col form-control dmrect" type="number">
        <label for="r4_th" class="col-1 col-form-label text-right">th</label>
        <input id="r4_th" class="col form-control" type="number">
      </div>
      <div class="form-group row p-1 m-1 border">
        <label for="upload-rect" class="col-2 col-form-label bg-light">Upload rect.csv</label>
        <input type="file" class="col form-control-file" id="upload-rect">
      </div>
      <div class="form-group row p-1 m-1 border">
        <label for="wifc" class="col-2 col-form-label bg-light">Upload wi-fc.csv</label>
        <input type="file" class="col form-control-file" id="wifc">
      </div>
      <div class="row m-1 p-1 justify-content-end">
        <span id="result" class="col"></span>
        <a type="button" id="dl-rect" href="./rect.csv?device_id={{ device_id }}&image_id={{ image_id }}&v={{ now }}" class="btn btn-secondary col-2 mr-3">Download rect.csv</a>
        <a type="button" id="dl-wifc" href="./wi-fc.csv?device_id={{ device_id }}&image_id={{ image_id }}&v={{ now }}" class="btn btn-secondary col-2 mr-3">Download wi-fc.csv</a>
        <button type="button" id="test" class="btn btn-secondary col-2 mr-5">Test</button>
        <button type="button" id="save" class="btn btn-primary col-3" disabled>Save</button>
      </div>
    </form>
  </div>
{% endblock %}

{% block script_contents %}
  <script src="https://pixijs.download/release/pixi.js"></script>

  <script type="text/javascript">
    const imageUrl = "{{ image_url }}";
    const setting = {{ setting | tojson }};
  </script>
  <script src="/tools/static/readingsetting.js?v={{ js_version }}"></script>
{% endblock %}

